<apex:page standardController="SVMXC__Service_Group_Members__c" extensions="GE_OG_NewTechExtn" action="{!addCodeUtilization}" >
      
<script>

function reload()
{
    var oldURL = window.location.href
    var index = 0;
    var newURL = oldURL;
    index = oldURL.indexOf('?');
    if(index != -1){
        newURL = oldURL.substring(0, index);
    }
    
    newURL += '?pnl='+document.getElementById("{!$Component.myform.theBlock.info.businessList}").value
    window.location.href = newURL;
  
}
</script>
     <apex:form id="myform"> 
                         
         <apex:sectionheader title="Technician Creation" subtitle="{!if(SVMXC__Service_Group_Members__c.Id==null,'New Technician',SVMXC__Service_Group_Members__c.Name)}"></apex:sectionheader>
         <apex:pageblock mode="edit" id="theBlock" title="Technician Creation">
         <apex:pageblockbuttons >
             <apex:commandbutton action="{!save}" value="Save"></apex:commandbutton>
             <apex:param value="$CurrentPage.parameters.pnl"/>
             <apex:commandbutton action="{!cancel}" value="Cancel"></apex:commandbutton>
         </apex:pageblockbuttons> 
         <apex:pageMessages id="errormessages"></apex:pageMessages><!-- displays all message generated by the component -->
             <apex:pageblocksection id="info" title="Technician Information" columns="1">
                 <apex:selectList id="businessList" value="{!business}" rendered="true" label="Business Unit" size="1" required="true" onchange="reload()" >
                    <apex:selectOptions value="{!items}"/>
                 </apex:selectList>
                 <br></br>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.GE_SM_HQ_SSO_ID__c}" required="true" rendered="{!IF(OR($CurrentPage.parameters.pnl=="TMS-Emp",$CurrentPage.parameters.pnl=="TMS-Cont",$CurrentPage.parameters.pnl =="AL",$CurrentPage.parameters.pnl =="DNS",$CurrentPage.parameters.pnl =="SS",$CurrentPage.parameters.pnl =="PC",$CurrentPage.parameters.pnl =="DTS",$CurrentPage.parameters.pnl =="MNC"),true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.SVMXC__Service_Group__c}" required="true" rendered="{!IF(OR($CurrentPage.parameters.pnl=="TMS-Emp",$CurrentPage.parameters.pnl=="TMS-Cont",$CurrentPage.parameters.pnl =="AL",$CurrentPage.parameters.pnl =="DNS",$CurrentPage.parameters.pnl =="SS",$CurrentPage.parameters.pnl =="PC",$CurrentPage.parameters.pnl =="DTS",$CurrentPage.parameters.pnl =="MNC"),true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.SVMXC__Enable_Scheduling__c}" required="false" rendered="{!IF(OR($CurrentPage.parameters.pnl=="TMS",$CurrentPage.parameters.pnl =="AL",$CurrentPage.parameters.pnl =="DNS",$CurrentPage.parameters.pnl =="SS",$CurrentPage.parameters.pnl =="PC",$CurrentPage.parameters.pnl =="DTS",$CurrentPage.parameters.pnl =="MNC"),true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.GE_OG_GS_FSE_Type__c}" required="true" rendered="{!IF($CurrentPage.parameters.pnl=="TMS-Emp",true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.GE_OG_MC_Nationality__c}" required="true" rendered="{!IF(OR($CurrentPage.parameters.pnl=="TMS-Emp",$CurrentPage.parameters.pnl=="TMS-Cont"),true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.GE_OG_GS_Resident__c}" required="true" rendered="{!IF(OR($CurrentPage.parameters.pnl=="TMS-Emp",$CurrentPage.parameters.pnl=="TMS-Cont"),true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.GE_OG_GS_Site_Manager__c}" required="true" rendered="{!IF(OR($CurrentPage.parameters.pnl=="TMS-Emp",$CurrentPage.parameters.pnl=="TMS-Cont"),true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.GE_OG_GS_Fit_to_Work_Date__c}" required="true" rendered="{!IF(OR($CurrentPage.parameters.pnl=="TMS-Emp",$CurrentPage.parameters.pnl=="TMS-Cont"),true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.GE_OG_GS_Fit_to_Work_expiry_Date__c}" required="true" rendered="{!IF(OR($CurrentPage.parameters.pnl=="TMS-Emp",$CurrentPage.parameters.pnl=="TMS-Cont"),true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.GE_SM_HQ_Regional_Manager__c}" required="true" rendered="{!IF($CurrentPage.parameters.pnl =="MNC",true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.GE_OG_DS_Sub_Org__c}" required="true" rendered="{!IF($CurrentPage.parameters.pnl =="SS",true,false)}"/>
                 <apex:inputField value="{!SVMXC__Service_Group_Members__c.GE_SM_HQ_Controls_EmpType__c}" required="true" rendered="{!IF(OR($CurrentPage.parameters.pnl =="AL",$CurrentPage.parameters.pnl =="DNS",$CurrentPage.parameters.pnl =="SS",$CurrentPage.parameters.pnl =="PC",$CurrentPage.parameters.pnl =="DTS",$CurrentPage.parameters.pnl =="MNC"),true,false)}"/>
             </apex:pageblocksection>             
         </apex:pageblock>
        
           
     </apex:form>
 </apex:page>