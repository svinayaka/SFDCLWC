<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <alerts>
        <fullName>GE_DRL_Email_After_the_Course_Expiry</fullName>
        <description>Email Alert on the Course Expiry after Expiration Date</description>
        <protected>false</protected>
        <recipients>
            <field>GE_DRL_Service_Team_Leader_Email__c</field>
            <type>email</type>
        </recipients>
        <recipients>
            <field>GE_DRL_Technician_Email__c</field>
            <type>email</type>
        </recipients>
        <senderType>DefaultWorkflowUser</senderType>
        <template>SVMXC__ServiceMaxEmailTemplates/GE_DRL_Course_Expiry_Email_Template_After_Expiry</template>
    </alerts>
    <alerts>
        <fullName>GE_DRL_Email_Alert_on_the_Course_Expiry</fullName>
        <description>Email Alert on the Course Expiry</description>
        <protected>false</protected>
        <recipients>
            <field>GE_DRL_Service_Team_Leader_Email__c</field>
            <type>email</type>
        </recipients>
        <recipients>
            <field>GE_DRL_Technician_Email__c</field>
            <type>email</type>
        </recipients>
        <senderType>DefaultWorkflowUser</senderType>
        <template>SVMXC__ServiceMaxEmailTemplates/GE_DRL_Course_Expiry_Email_Template</template>
    </alerts>
    <fieldUpdates>
        <fullName>GE_DRL_Populate_ServiceTeam_Leader_Email</fullName>
        <description>To populate Service Team Leader Email</description>
        <field>GE_DRL_Service_Team_Leader_Email__c</field>
        <formula>GE_OG_GS_Course_Technician__r.SVMXC__Service_Group__r.GE_HQ_Resource_Director__r.Email</formula>
        <name>Populate Service Team Leader Email</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>GE_DRL_Populate_Technician_Email</fullName>
        <description>To populate Technician Email on Course Record</description>
        <field>GE_DRL_Technician_Email__c</field>
        <formula>GE_OG_GS_Course_Technician__r.SVMXC__Salesforce_User__r.Email</formula>
        <name>Populate Technician Email</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
    </fieldUpdates>
    <rules>
        <fullName>GE_DRL_Auto_Populate_FSE_STL_Email</fullName>
        <actions>
            <name>GE_DRL_Populate_ServiceTeam_Leader_Email</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>GE_DRL_Populate_Technician_Email</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>SVMXC__Service_Group_Members__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>GE OG D&amp;S Technician/Equipment</value>
        </criteriaItems>
        <criteriaItems>
            <field>GE_OG_GS_Course__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>Drilling</value>
        </criteriaItems>
        <description>For Sending Email when the course is getting expired</description>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>GE_DRL_Email_Notification_On_Course_Expiry</fullName>
        <active>false</active>
        <criteriaItems>
            <field>SVMXC__Service_Group_Members__c.SVMXC__Active__c</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <criteriaItems>
            <field>GE_OG_GS_Course__c.GE_DS_Expiration_Date_F__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>GE_OG_GS_Course__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>Drilling</value>
        </criteriaItems>
        <criteriaItems>
            <field>SVMXC__Service_Group_Members__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>GE OG D&amp;S Technician/Equipment</value>
        </criteriaItems>
        <description>To send email notification on Course Expiry to FSE and Service Team Leader</description>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
        <workflowTimeTriggers>
            <actions>
                <name>GE_DRL_Email_Alert_on_the_Course_Expiry</name>
                <type>Alert</type>
            </actions>
            <offsetFromField>GE_OG_GS_Course__c.GE_DS_Expiration_Date_F__c</offsetFromField>
            <timeLength>-90</timeLength>
            <workflowTimeTriggerUnit>Days</workflowTimeTriggerUnit>
        </workflowTimeTriggers>
        <workflowTimeTriggers>
            <actions>
                <name>GE_DRL_Email_After_the_Course_Expiry</name>
                <type>Alert</type>
            </actions>
            <offsetFromField>GE_OG_GS_Course__c.GE_DS_Expiration_Date_F__c</offsetFromField>
            <timeLength>1</timeLength>
            <workflowTimeTriggerUnit>Days</workflowTimeTriggerUnit>
        </workflowTimeTriggers>
        <workflowTimeTriggers>
            <actions>
                <name>GE_DRL_Email_Alert_on_the_Course_Expiry</name>
                <type>Alert</type>
            </actions>
            <offsetFromField>GE_OG_GS_Course__c.GE_DS_Expiration_Date_F__c</offsetFromField>
            <timeLength>-30</timeLength>
            <workflowTimeTriggerUnit>Days</workflowTimeTriggerUnit>
        </workflowTimeTriggers>
    </rules>
    <rules>
        <fullName>GE_DRL_Email_Notification_On_Course_Expiry_Days</fullName>
        <active>true</active>
        <criteriaItems>
            <field>SVMXC__Service_Group_Members__c.SVMXC__Active__c</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <criteriaItems>
            <field>GE_OG_GS_Course__c.GE_DS_Expiration_Date_F__c</field>
            <operation>notEqual</operation>
        </criteriaItems>
        <criteriaItems>
            <field>GE_OG_GS_Course__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>Drilling</value>
        </criteriaItems>
        <criteriaItems>
            <field>SVMXC__Service_Group_Members__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>GE OG D&amp;S Technician/Equipment</value>
        </criteriaItems>
        <description>To send email notification on Course Expiry to FSE and Service Team Leader</description>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
        <workflowTimeTriggers>
            <actions>
                <name>GE_DRL_Email_Alert_on_the_Course_Expiry</name>
                <type>Alert</type>
            </actions>
            <offsetFromField>GE_OG_GS_Course__c.GE_DS_Expiration_Date_F__c</offsetFromField>
            <timeLength>-7</timeLength>
            <workflowTimeTriggerUnit>Days</workflowTimeTriggerUnit>
        </workflowTimeTriggers>
    </rules>
</Workflow>
